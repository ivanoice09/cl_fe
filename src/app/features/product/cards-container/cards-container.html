<div class="container py-4">

  @if (mainCategoryLabel) {
  <h3 class="product-label mb-3 text-capitalize">
    {{ mainCategoryLabel }}
  </h3>
  }

  <div class="row">
    <div class="col-12 col-md-4 col-lg-3 mb-4">

      <app-sub-category-selection [categories]="categories" [selectedCategoryId]="selectedCategoryId"
        [showAllButton]="!selectedMainCategory"
        (categoryChange)="onCategoryChange($event)">
      </app-sub-category-selection>
      
    </div>

    <div class="col-12 col-md-8 col-lg-9">
      @if (pagedData) {

        @if (isEmpty) {
        <div class="d-flex flex-column justify-content-center align-items-center text-center" style="min-height: 300px;">
          <h4 class="mb-2">
            Al momento nessun prodotto disponibile
          </h4>
        </div>
        
        } @else {
        <!-- PRODUCTS GRID -->
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-4 justify-content-center">
          @for (product of pagedData.items; track product.productId) {
          <div class="col">
            <app-card [product]="product"></app-card>
          </div>
          }
        </div>

        <div class="pagination">
          <button (click)="GetProducts(pagedData.currentPage - 1, selectedCategoryId)"
            [disabled]="!pagedData.hasPrevious">
            Indietro
          </button>
          <span>Pagina {{ pagedData.currentPage }} / {{ pagedData.totalPages }}</span>
          <button (click)="GetProducts(pagedData.currentPage + 1, selectedCategoryId)" [disabled]="!pagedData.hasNext">
            Avanti
          </button>
        </div>
        }

      } @else {
      <div class="d-flex justify-content-center align-items-center" style="height: 300px;">
        <div>Caricamento...</div>
      </div>
      }

    </div>

  </div>

</div>